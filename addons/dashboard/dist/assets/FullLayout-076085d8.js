import{o,c as u,w as t,e as v,t as y,g as ae,h as le,a as e,i as F,j as g,k as N,l as G,m as W,n as H,r as A,p as J,q as B,s as w,F as C,u as K,v as se,x as T,y as ie,b as _,z as oe,A as Q,B as n,C as ne,D as b,d as h,E as R,M as E,G as x,H as U,I as k,J as M,K as P,L as j,N as I,V as re,f as ue,O as S,P as O,Q as de,R as ce,S as me,T as z,U as pe,W as fe,X as ve,Y as _e,Z as he,_ as Ve}from"./index-9075b0bb.js";import{_ as be,u as D}from"./LogoDark.vue_vue_type_script_setup_true_lang-b3521e6c.js";import{m as q}from"./md5-48eb25f3.js";const ye=[{title:"面板",icon:"mdi-view-dashboard",to:"/dashboard/default"},{title:"配置",icon:"mdi-cog",to:"/config"},{title:"插件",icon:"mdi-puzzle",to:"/extension"},{title:"控制台",icon:"mdi-console",to:"/console"}],ke={__name:"NavGroup",props:{item:Object},setup(a){const i=a;return(d,f)=>(o(),u(ae,{color:"darkText",class:"smallCap"},{default:t(()=>[v(y(i.item.header),1)]),_:1}))}},X={__name:"NavItem",props:{item:Object,level:Number},setup(a){return(i,d)=>(o(),u(H,{to:a.item.type==="external"?"":a.item.to,href:a.item.type==="external"?a.item.to:"",rounded:"",class:"mb-1",color:"secondary",disabled:a.item.disabled,target:a.item.type==="external"?"_blank":""},le({prepend:t(()=>[a.item.icon?(o(),u(g,{key:0,color:a.item.iconColor,size:a.item.iconSize,class:"hide-menu",icon:a.item.icon},null,8,["color","size","icon"])):N("",!0)]),default:t(()=>[e(G,null,{default:t(()=>[v(y(a.item.title),1)]),_:1}),a.item.subCaption?(o(),u(W,{key:0,class:"text-caption mt-n1 hide-menu"},{default:t(()=>[v(y(a.item.subCaption),1)]),_:1})):N("",!0)]),_:2},[a.item.chip?{name:"append",fn:t(()=>[e(F,{color:a.item.chipColor,class:"sidebarchip hide-menu",size:a.item.chipIcon?"small":"default",variant:a.item.chipVariant,"prepend-icon":a.item.chipIcon},{default:t(()=>[v(y(a.item.chip),1)]),_:1},8,["color","size","variant","prepend-icon"])]),key:"0"}:void 0]),1032,["to","href","disabled","target"]))}},ge={__name:"IconSet",props:{item:Object,level:Number},setup(a){const i=a;return(d,f)=>i.level>0?(o(),u(A(i.item),{key:0,size:"5",fill:"currentColor","stroke-width":"1.5",class:"iconClass"})):(o(),u(A(i.item),{key:1,size:"20","stroke-width":"1.5",class:"iconClass"}))}},we={__name:"NavCollapse",props:{item:Object,level:Number},setup(a){const i=a;return(d,f)=>{const r=J("NavCollapse",!0);return o(),u(se,{"no-action":""},{activator:t(({props:c})=>[e(H,B(c,{value:a.item.title,rounded:"",class:"mb-1",color:"secondary"}),{prepend:t(()=>[e(ge,{item:a.item.icon,level:a.level},null,8,["item","level"])]),default:t(()=>[e(G,{class:"mr-auto"},{default:t(()=>[v(y(a.item.title),1)]),_:1}),a.item.subCaption?(o(),u(W,{key:0,class:"text-caption mt-n1 hide-menu"},{default:t(()=>[v(y(a.item.subCaption),1)]),_:1})):N("",!0)]),_:2},1040,["value"])]),default:t(()=>[(o(!0),w(C,null,K(a.item.children,(c,p)=>(o(),w(C,{key:p},[c.children?(o(),u(r,{key:0,item:c,level:i.level+1},null,8,["item","level"])):(o(),u(X,{key:1,item:c,level:i.level+1},null,8,["item","level"]))],64))),128))]),_:1})}}},Ce={__name:"LogoMain",setup(a){return(i,d)=>(o(),u(be))}},xe={class:"pa-5"},Se={class:"pa-4 text-center"},ze=T({__name:"VerticalSidebar",setup(a){const i=D(),d=ie(ye);return(f,r)=>{const c=J("perfect-scrollbar");return o(),u(ne,{left:"",modelValue:n(i).Sidebar_drawer,"onUpdate:modelValue":r[0]||(r[0]=p=>n(i).Sidebar_drawer=p),elevation:"0","rail-width":"105","mobile-breakpoint":"960",app:"",class:"leftSidebar",rail:n(i).mini_sidebar,"expand-on-hover":""},{default:t(()=>[_("div",xe,[e(Ce)]),e(c,{class:"scrollnavbar"},{default:t(()=>[e(oe,{class:"pa-4"},{default:t(()=>[(o(!0),w(C,null,K(d.value,(p,V)=>(o(),w(C,{key:V},[p.header?(o(),u(ke,{item:p,key:p.title},null,8,["item"])):p.divider?(o(),u(Q,{key:1,class:"my-3"})):p.children?(o(),u(we,{key:2,class:"leftPadding",item:p,level:0},null,8,["item"])):(o(),u(X,{key:3,item:p,class:"leftPadding"},null,8,["item"]))],64))),128))]),_:1}),_("div",Se,[e(F,{color:"inputBorder",size:"small"},{default:t(()=>[v(" v1.0.0 ")]),_:1})])]),_:1})]),_:1},8,["modelValue","rail"])}}}),Ne=_("span",{class:"text-h5"},"密码修改",-1),Be=_("small",null,"如果是第一次修改密码，原密码请留空。",-1),Ie=_("br",null,null,-1),Te=_("span",{class:"text-h5"},"更新项目",-1),De={style:{"margin-top":"16px"}},Le=_("p",null,"切换到指定版本",-1),$e=T({__name:"VerticalHeader",setup(a){const i=D();b(!1);let d=b(!1),f=b(!1),r=b(""),c=b(""),p=b(""),V=b(""),L=b(!1),Y=b("");const Z=m=>{window.open(m,"_blank")};function ee(){r.value!=""&&(r.value=q.md5(r.value)),c.value=q.md5(c.value),z.post("/api/change_password",{password:r.value,new_password:c.value}).then(m=>{if(m.data.status=="error"){p.value=m.data.message,r.value="",c.value="";return}d.value=!d.value,p.value=m.data.message,setTimeout(()=>{pe().logout()},1e3)}).catch(m=>{console.log(m),p.value=m,r.value="",c.value=""})}function te(){V.value="正在检查更新...",z.get("/api/check_update").then(m=>{L.value=m.data.data.has_new_version,V.value=m.data.message}).catch(m=>{console.log(m),V.value=m})}function $(m){V.value="正在切换版本...",z.post("/api/update_project",{version:m}).then(l=>{V.value=l.data.message,l.data.status=="success"&&setTimeout(()=>{window.location.reload()},1e3)}).catch(l=>{console.log(l),V.value=l})}return(m,l)=>(o(),u(me,{elevation:"0",height:"80"},{default:t(()=>[e(h,{class:"hidden-md-and-down text-secondary",color:"lightsecondary",icon:"",rounded:"sm",variant:"flat",onClick:l[0]||(l[0]=R(s=>n(i).SET_MINI_SIDEBAR(!n(i).mini_sidebar),["stop"])),size:"small"},{default:t(()=>[e(n(E),{size:"20","stroke-width":"1.5"})]),_:1}),e(h,{class:"hidden-lg-and-up text-secondary ms-3",color:"lightsecondary",icon:"",rounded:"sm",variant:"flat",onClick:R(n(i).SET_SIDEBAR_DRAWER,["stop"]),size:"small"},{default:t(()=>[e(n(E),{size:"20","stroke-width":"1.5"})]),_:1},8,["onClick"]),e(x),e(U,{modelValue:n(d),"onUpdate:modelValue":l[4]||(l[4]=s=>k(d)?d.value=s:d=s),persistent:"",width:"700"},{activator:t(({props:s})=>[e(h,B({class:"profileBtn text-primary",color:"lightprimary",variant:"flat",rounded:"pill"},s),{default:t(()=>[e(g,{icon:"mdi-account-edit",size:"25"})]),_:2},1040)]),default:t(()=>[e(M,null,{default:t(()=>[e(P,null,{default:t(()=>[Ne]),_:1}),e(j,null,{default:t(()=>[e(I,null,{default:t(()=>[e(re,null,{default:t(()=>[e(ue,{cols:"12"},{default:t(()=>[e(S,{label:"原密码*",type:"password",modelValue:n(r),"onUpdate:modelValue":l[1]||(l[1]=s=>k(r)?r.value=s:r=s),required:""},null,8,["modelValue"]),e(S,{label:"新密码*",type:"password",modelValue:n(c),"onUpdate:modelValue":l[2]||(l[2]=s=>k(c)?c.value=s:c=s),required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Be,Ie,_("small",null,y(n(p)),1)]),_:1}),e(O,null,{default:t(()=>[e(x),e(h,{color:"blue-darken-1",variant:"text",onClick:l[3]||(l[3]=s=>k(d)?d.value=!1:d=!1)},{default:t(()=>[v(" 关闭 ")]),_:1}),e(h,{color:"blue-darken-1",variant:"text",onClick:ee},{default:t(()=>[v(" 提交 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:n(f),"onUpdate:modelValue":l[9]||(l[9]=s=>k(f)?f.value=s:f=s),width:"700"},{activator:t(({props:s})=>[e(h,B({onClick:te,class:"profileBtn text-primary",color:"lightprimary",variant:"flat",rounded:"pill"},s),{default:t(()=>[e(g,{icon:"mdi-update",size:"25"})]),_:2},1040)]),default:t(()=>[e(M,null,{default:t(()=>[e(P,null,{default:t(()=>[Te]),_:1}),e(j,null,{default:t(()=>[e(I,null,{default:t(()=>[_("p",null,y(n(V)),1),de(e(h,{onClick:l[5]||(l[5]=s=>$("latest")),color:"primary",class:"ml-2",style:{"border-radius":"10px"}},{default:t(()=>[v(" 更新到最新版本 ")]),_:1},512),[[ce,n(L)]]),e(Q),_("div",De,[Le,e(S,{label:"版本号。如v3.1.3",type:"password",modelValue:n(r),"onUpdate:modelValue":l[6]||(l[6]=s=>k(r)?r.value=s:r=s),required:""},null,8,["modelValue"]),e(h,{color:"primary",class:"ml-2",style:{"border-radius":"10px"},onClick:l[7]||(l[7]=s=>$(n(Y)))},{default:t(()=>[v(" 切换到指定版本 ")]),_:1})])]),_:1})]),_:1}),e(O,null,{default:t(()=>[e(x),e(h,{color:"blue-darken-1",variant:"text",onClick:l[8]||(l[8]=s=>k(f)?f.value=!1:f=!1)},{default:t(()=>[v(" 关闭 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,{class:"profileBtn text-primary",color:"lightprimary",variant:"flat",onClick:l[10]||(l[10]=s=>Z("https://github.com/Soulter/AstrBot")),rounded:"pill"},{default:t(()=>[e(g,{icon:"mdi-github",size:"25"})]),_:1})]),_:1}))}}),Ue=T({__name:"FullLayout",setup(a){const i=D();return(d,f)=>(o(),u(Ve,null,{default:t(()=>[e(fe,{theme:"PurpleTheme",class:ve([n(i).fontTheme,n(i).mini_sidebar?"mini-sidebar":"",n(i).inputBg?"inputWithbg":""])},{default:t(()=>[e(ze),e($e),e(_e,null,{default:t(()=>[e(I,{fluid:"",class:"page-wrapper"},{default:t(()=>[_("div",null,[e(n(he))])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}))}});export{Ue as default};
