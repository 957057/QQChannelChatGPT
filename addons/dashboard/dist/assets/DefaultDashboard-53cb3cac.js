import{y as R,p as c,o as m,c as h,w as e,a as t,O as y,b as a,d as p,j as w,P as z,q as F,Q as j,z as C,s as D,F as M,u as B,n as x,r as N,l as V,e as g,t as $,S as b,T as U,D as O,U as k,W,X as L,Y as X,Z as I,V as T,f as u,G as E,_ as G}from"./index-96c19dfb.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{a as Y}from"./axios-28bc18a3.js";const q={class:"d-flex align-start mb-6"},A={class:"ml-auto z-1"},H=a("h2",{class:"text-h1 font-weight-medium"}," ?? ",-1),Z=a("span",{class:"text-subtitle-1 text-medium-emphasis text-white"},"消息总数",-1),J={name:"TotalMessage",components:{},props:["stat"],data:()=>({stat:{}}),mounted(){}},K=Object.assign(J,{setup(s){const l=R([{title:"移除",icon:U}]);return(_,f)=>{const r=c("DotsIcon");return m(),h(b,{elevation:"0",class:"bg-secondary overflow-hidden bubble-shape bubble-secondary-shape"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",q,[t(p,{icon:"",rounded:"sm",color:"darksecondary",variant:"flat"},{default:e(()=>[t(w,{icon:"mdi-message"})]),_:1}),a("div",A,[t(z,{"close-on-content-click":!1},{activator:e(({props:n})=>[t(p,F({icon:"",rounded:"sm",color:"secondary",variant:"flat",size:"small"},n),{default:e(()=>[t(r,{"stroke-width":"1.5",width:"20"})]),_:2},1040)]),default:e(()=>[t(j,{rounded:"md",width:"150",class:"elevation-10"},{default:e(()=>[t(C,{density:"compact"},{default:e(()=>[(m(!0),D(M,null,B(l.value,(n,i)=>(m(),h(x,{key:i,value:i},{prepend:e(()=>[(m(),h(N(n.icon),{"stroke-width":"1.5",size:"20"}))]),default:e(()=>[t(V,{class:"ml-2"},{default:e(()=>[g($(n.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})])]),H,Z]),_:1})]),_:1})}}}),tt={class:"d-flex align-start mb-3"},et={class:"ml-auto z-1"},at=a("h2",{class:"text-h1 font-weight-medium"}," ?? ",-1),st=a("span",{class:"text-subtitle-1 text-medium-emphasis text-white"},"会话总数",-1),ot=a("h2",{class:"text-h1 font-weight-medium"}," 198 ",-1),lt=a("span",{class:"text-subtitle-1 text-medium-emphasis text-white"},"会话总数",-1),nt={name:"TotalSession",components:{},props:["stat"],data:()=>({stat:{}}),mounted(){}},it=Object.assign(nt,{setup(s){const l=O("1"),_=k(()=>({chart:{type:"bar",height:90,fontFamily:"inherit",foreColor:"#a1aab2",sparkline:{enabled:!0}},dataLabels:{enabled:!1},colors:["#fff"],fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:3},yaxis:{min:0,max:100},tooltip:{theme:"dark",fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:()=>"会话总数"}},marker:{show:!1}}})),f={series:[{name:"series1",data:[45,66,41,89,25,44,9,54]}]},r=k(()=>({chart:{type:"bar",height:90,fontFamily:"inherit",foreColor:"#a1aab2",sparkline:{enabled:!0}},dataLabels:{enabled:!1},colors:["#fff"],fill:{type:"solid",opacity:1},stroke:{curve:"smooth",width:3},yaxis:{min:0,max:100},tooltip:{theme:"dark",fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:()=>"会话总数"}},marker:{show:!1}}})),n={series:[{name:"series1",data:[35,44,9,54,45,66,41,69]}]};return(i,o)=>{const d=c("apexchart");return m(),h(b,{elevation:"0",class:"bg-primary overflow-hidden bubble-shape bubble-primary-shape"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",tt,[t(p,{icon:"",rounded:"sm",color:"darkprimary",variant:"flat"},{default:e(()=>[t(w,{icon:"mdi-account-multiple-outline"})]),_:1}),a("div",et,[t(W,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=v=>l.value=v),class:"theme-tab",density:"compact",end:""},{default:e(()=>[t(L,{value:"1","hide-slider":"",color:"transparent"},{default:e(()=>[g("按日")]),_:1}),t(L,{value:"2","hide-slider":"",color:"transparent"},{default:e(()=>[g("按月")]),_:1})]),_:1},8,["modelValue"])])]),t(X,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=v=>l.value=v),class:"z-1"},{default:e(()=>[t(I,{value:"1"},{default:e(()=>[t(T,null,{default:e(()=>[t(u,{cols:"6"},{default:e(()=>[at,st]),_:1}),t(u,{cols:"6"},{default:e(()=>[t(d,{type:"line",height:"90",options:_.value,series:f.series},null,8,["options","series"])]),_:1})]),_:1})]),_:1}),t(I,{value:"2"},{default:e(()=>[t(T,null,{default:e(()=>[t(u,{cols:"6"},{default:e(()=>[ot,lt]),_:1}),t(u,{cols:"6"},{default:e(()=>[t(d,{type:"line",height:"90",options:r.value,series:n.series},null,8,["options","series"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),rt={name:"OnlineTime",components:{},props:["stat"],watch:{stat:{handler:function(s,l){this.memory=s.sys_perf.memory,this.runtime_str=s.sys_start_time;let _=new Date().getTime(),f=new Date(s.sys_start_time*1e3).getTime(),r=_-f,n=Math.floor(r/(24*3600*1e3)),i=r%(24*3600*1e3),o=Math.floor(i/(3600*1e3)),d=i%(3600*1e3),v=Math.floor(d/(60*1e3)),S=d%(60*1e3),Q=Math.round(S/1e3);this.runtime_str=n+"天"+o+"小时"+v+"分"+Q+"秒"},deep:!0}},data:()=>({_stat:{},memory:"Loading",runtime_str:"Loading"}),mounted(){}},dt={class:"d-flex align-center gap-3"},ct={class:"text-h4 font-weight-medium"},ut=a("span",{class:"text-subtitle-2 text-medium-emphasis text-white"},"运行时间",-1),mt={class:"d-flex align-center gap-3"},_t={class:"text-h4 font-weight-medium"},ft=a("span",{class:"text-subtitle-2 text-disabled font-weight-medium"},"占用内存",-1);function ht(s,l,_,f,r,n){return m(),D(M,null,[t(b,{elevation:"0",class:"bg-primary overflow-hidden bubble-shape-sm bubble-primary mb-6"},{default:e(()=>[t(y,{class:"pa-5"},{default:e(()=>[a("div",dt,[t(p,{color:"darkprimary",icon:"",rounded:"sm",variant:"flat"},{default:e(()=>[t(w,{icon:"mdi-clock"})]),_:1}),a("div",null,[a("h4",ct,$(s.runtime_str),1),ut]),t(E),a("div",null,[t(p,{icon:"",rounded:"sm",variant:"plain"},{default:e(()=>[t(w,{color:"black",icon:"mdi-stop",size:"32"})]),_:1})])])]),_:1})]),_:1}),t(b,{elevation:"0",class:"bubble-shape-sm overflow-hidden bubble-warning"},{default:e(()=>[t(y,{class:"pa-5"},{default:e(()=>[a("div",mt,[t(p,{color:"lightwarning",icon:"",rounded:"sm",variant:"flat"},{default:e(()=>[t(w,{icon:"mdi-memory"})]),_:1}),a("div",null,[a("h4",_t,$(s.memory)+" MiB",1),ft])])]),_:1})]),_:1})],64)}const pt=P(rt,[["render",ht]]),bt=a("span",{class:"text-subtitle-2 text-disabled font-weight-bold"},"上行消息总趋势",-1),vt=a("h3",{class:"text-h3 mt-1"},"??",-1),gt={class:"mt-4"},yt={name:"MessageStat",components:{},props:["stat"],data:()=>({}),mounted(){}},xt=Object.assign(yt,{setup(s){const l=O({state:"Today",abbr:"FL"}),_=[{state:"今天",abbr:"FL"},{state:"今月",abbr:"GA"},{state:"今年",abbr:"NE"}],f=k(()=>({chart:{type:"bar",height:400,fontFamily:"inherit",foreColor:"#a1aab2",stacked:!0},colors:["#1e88e5","#5e35b1","#ede7f6"],responsive:[{breakpoint:400,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}},xaxis:{type:"category",categories:["1","2","3","4","5","6","7","8","9","10","11","12"]},legend:{show:!0,fontFamily:"'Roboto', sans-serif",position:"bottom",offsetX:20,labels:{useSeriesColors:!1},markers:{width:16,height:16,radius:5},itemMargin:{horizontal:15,vertical:8}},fill:{type:"solid"},dataLabels:{enabled:!1},grid:{show:!0},tooltip:{theme:"dark"}})),r={series:[{name:"消息条数",data:[35,145,35,35,20,105,100,10,65,45,30,10]}]};return(n,i)=>{const o=c("apexchart");return m(),h(b,{elevation:"0"},{default:e(()=>[t(b,{variant:"outlined"},{default:e(()=>[t(y,null,{default:e(()=>[t(T,null,{default:e(()=>[t(u,{cols:"12",sm:"9"},{default:e(()=>[bt,vt]),_:1}),t(u,{cols:"12",sm:"3"},{default:e(()=>[t(G,{color:"primary",variant:"outlined","hide-details":"",modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=d=>l.value=d),items:_,"item-title":"state","item-value":"abbr",label:"Select","persistent-hint":"","return-object":"","single-line":""},null,8,["modelValue"])]),_:1})]),_:1}),a("div",gt,[t(o,{type:"bar",height:"280",options:f.value,series:r.series},null,8,["options","series"])])]),_:1})]),_:1})]),_:1})}}}),wt={class:"d-flex align-center"},$t=a("h4",{class:"text-h4 mt-1"},"各平台上行消息数",-1),Vt={class:"ml-auto"},kt={class:"mt-4"},Tt={class:"d-inline-flex align-center justify-space-between w-100"},St={class:"text-subtitle-1 text-medium-emphasis font-weight-bold"},Ct={class:"ml-auto text-subtitle-1 text-medium-emphasis font-weight-bold"},Dt={class:"text-center mt-3"},Mt={name:"PlatformStat",components:{},props:["stat"],watch:{stat:{handler:function(s,l){this.stat=s},deep:!0}},data:()=>({}),mounted(){}},Ot=Object.assign(Mt,{setup(s){k(()=>({chart:{type:"area",height:95,fontFamily:"inherit",foreColor:"#a1aab2",sparkline:{enabled:!0}},colors:["#5e35b1"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:1},tooltip:{theme:"dark",fixed:{enabled:!1},x:{show:!1},y:{title:{formatter:()=>"消息条数 "}},marker:{show:!1}}}));const l=O([{name:"QQ 群",count:14124},{name:"QQ 频道",count:612},{name:"Discord",count:123}]);return(_,f)=>{const r=c("DotsIcon"),n=c("perfect-scrollbar"),i=c("ChevronRightIcon");return m(),h(b,{elevation:"0"},{default:e(()=>[t(b,{variant:"outlined"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",wt,[$t,a("div",Vt,[t(z,{transition:"slide-y-transition"},{activator:e(({props:o})=>[t(p,F({color:"primary",size:"small",icon:"",rounded:"sm",variant:"text"},o),{default:e(()=>[t(r,{"stroke-width":"1.5",width:"25"})]),_:2},1040)]),default:e(()=>[t(j,{rounded:"md",width:"150",class:"elevation-10"},{default:e(()=>[t(C,null,{default:e(()=>[t(x,{value:"1"},{default:e(()=>[t(V,null,{default:e(()=>[g("今天")]),_:1})]),_:1}),t(x,{value:"2"},{default:e(()=>[t(V,null,{default:e(()=>[g("今月")]),_:1})]),_:1}),t(x,{value:"3"},{default:e(()=>[t(V,null,{default:e(()=>[g("今年")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),a("div",kt,[t(n,{style:{height:"270px"}},{default:e(()=>[t(C,{lines:"two",class:"py-0"},{default:e(()=>[(m(!0),D(M,null,B(l.value,(o,d)=>(m(),h(x,{key:d,value:o,color:"secondary",rounded:"sm"},{default:e(()=>[a("div",Tt,[a("div",null,[a("h6",St,$(o.name),1)]),a("div",Ct,$(o.count)+" 条",1)])]),_:2},1032,["value"]))),128))]),_:1})]),_:1}),a("div",Dt,[t(p,{color:"primary",variant:"text"},{append:e(()=>[t(i,{"stroke-width":"1.5",width:"20"})]),default:e(()=>[g("详情 ")]),_:1})])])]),_:1})]),_:1})]),_:1})}}}),Lt={name:"DefaultDashboard",components:{TotalMessage:K,TotalSession:it,OnlineTime:pt,MessageStat:xt,PlatformStat:Ot},data:()=>({stat:{}}),mounted(){Y.get("/api/stats").then(s=>{console.log("stat",s.data.data),this.stat=s.data.data})}};function It(s,l,_,f,r,n){const i=c("TotalMessage"),o=c("TotalSession"),d=c("OnlineTime"),v=c("MessageStat"),S=c("PlatformStat");return m(),h(T,null,{default:e(()=>[t(u,{cols:"12",md:"4"},{default:e(()=>[t(i,{stat:s.stat},null,8,["stat"])]),_:1}),t(u,{cols:"12",md:"4"},{default:e(()=>[t(o,{stat:s.stat},null,8,["stat"])]),_:1}),t(u,{cols:"12",md:"4"},{default:e(()=>[t(d,{stat:s.stat},null,8,["stat"])]),_:1}),t(u,{cols:"12",lg:"8"},{default:e(()=>[t(v,{stat:s.stat},null,8,["stat"])]),_:1}),t(u,{cols:"12",lg:"4"},{default:e(()=>[t(S,{stat:s.stat},null,8,["stat"])]),_:1})]),_:1})}const Bt=P(Lt,[["render",It]]);export{Bt as default};
