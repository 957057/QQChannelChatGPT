import{o,c as r,w as t,e as v,t as k,g as ae,h as le,a as e,i as G,j as C,k as B,l as W,m as H,n as J,r as R,p as K,q as I,s as w,F as x,u as Q,v as se,x as D,y as ie,b as _,z as oe,A as X,B as n,C as ne,D as b,d as h,E,M as U,G as S,H as M,I as y,J as P,K as j,L as O,N as T,V as re,f as ue,O as z,P as q,Q as de,R as ce,S as me,T as N,U as pe,W as fe,X as ve,Y as _e,Z as he,_ as Ve}from"./index-5ac7c267.js";import{_ as be,u as L}from"./LogoDark.vue_vue_type_script_setup_true_lang-d555e5be.js";import{m as F}from"./md5-086248bf.js";const ke=[{title:"面板",icon:"mdi-view-dashboard",to:"/dashboard/default"},{title:"配置",icon:"mdi-cog",to:"/config"},{title:"插件",icon:"mdi-puzzle",to:"/extension"},{title:"控制台",icon:"mdi-console",to:"/console"}],ye={__name:"NavGroup",props:{item:Object},setup(a){const i=a;return(u,f)=>(o(),r(ae,{color:"darkText",class:"smallCap"},{default:t(()=>[v(k(i.item.header),1)]),_:1}))}},Y={__name:"NavItem",props:{item:Object,level:Number},setup(a){return(i,u)=>(o(),r(J,{to:a.item.type==="external"?"":a.item.to,href:a.item.type==="external"?a.item.to:"",rounded:"",class:"mb-1",color:"secondary",disabled:a.item.disabled,target:a.item.type==="external"?"_blank":""},le({prepend:t(()=>[a.item.icon?(o(),r(C,{key:0,color:a.item.iconColor,size:a.item.iconSize,class:"hide-menu",icon:a.item.icon},null,8,["color","size","icon"])):B("",!0)]),default:t(()=>[e(W,null,{default:t(()=>[v(k(a.item.title),1)]),_:1}),a.item.subCaption?(o(),r(H,{key:0,class:"text-caption mt-n1 hide-menu"},{default:t(()=>[v(k(a.item.subCaption),1)]),_:1})):B("",!0)]),_:2},[a.item.chip?{name:"append",fn:t(()=>[e(G,{color:a.item.chipColor,class:"sidebarchip hide-menu",size:a.item.chipIcon?"small":"default",variant:a.item.chipVariant,"prepend-icon":a.item.chipIcon},{default:t(()=>[v(k(a.item.chip),1)]),_:1},8,["color","size","variant","prepend-icon"])]),key:"0"}:void 0]),1032,["to","href","disabled","target"]))}},ge={__name:"IconSet",props:{item:Object,level:Number},setup(a){const i=a;return(u,f)=>i.level>0?(o(),r(R(i.item),{key:0,size:"5",fill:"currentColor","stroke-width":"1.5",class:"iconClass"})):(o(),r(R(i.item),{key:1,size:"20","stroke-width":"1.5",class:"iconClass"}))}},Ce={__name:"NavCollapse",props:{item:Object,level:Number},setup(a){const i=a;return(u,f)=>{const p=K("NavCollapse",!0);return o(),r(se,{"no-action":""},{activator:t(({props:d})=>[e(J,I(d,{value:a.item.title,rounded:"",class:"mb-1",color:"secondary"}),{prepend:t(()=>[e(ge,{item:a.item.icon,level:a.level},null,8,["item","level"])]),default:t(()=>[e(W,{class:"mr-auto"},{default:t(()=>[v(k(a.item.title),1)]),_:1}),a.item.subCaption?(o(),r(H,{key:0,class:"text-caption mt-n1 hide-menu"},{default:t(()=>[v(k(a.item.subCaption),1)]),_:1})):B("",!0)]),_:2},1040,["value"])]),default:t(()=>[(o(!0),w(x,null,Q(a.item.children,(d,m)=>(o(),w(x,{key:m},[d.children?(o(),r(p,{key:0,item:d,level:i.level+1},null,8,["item","level"])):(o(),r(Y,{key:1,item:d,level:i.level+1},null,8,["item","level"]))],64))),128))]),_:1})}}},we={__name:"LogoMain",setup(a){return(i,u)=>(o(),r(be))}},xe={class:"pa-5"},Se={class:"pa-4 text-center"},ze=D({__name:"VerticalSidebar",setup(a){const i=L(),u=ie(ke);return(f,p)=>{const d=K("perfect-scrollbar");return o(),r(ne,{left:"",modelValue:n(i).Sidebar_drawer,"onUpdate:modelValue":p[0]||(p[0]=m=>n(i).Sidebar_drawer=m),elevation:"0","rail-width":"105","mobile-breakpoint":"960",app:"",class:"leftSidebar",rail:n(i).mini_sidebar,"expand-on-hover":""},{default:t(()=>[_("div",xe,[e(we)]),e(d,{class:"scrollnavbar"},{default:t(()=>[e(oe,{class:"pa-4"},{default:t(()=>[(o(!0),w(x,null,Q(u.value,(m,V)=>(o(),w(x,{key:V},[m.header?(o(),r(ye,{item:m,key:m.title},null,8,["item"])):m.divider?(o(),r(X,{key:1,class:"my-3"})):m.children?(o(),r(Ce,{key:2,class:"leftPadding",item:m,level:0},null,8,["item"])):(o(),r(Y,{key:3,item:m,class:"leftPadding"},null,8,["item"]))],64))),128))]),_:1}),_("div",Se,[e(G,{color:"inputBorder",size:"small"},{default:t(()=>[v(" v1.0.0 ")]),_:1})])]),_:1})]),_:1},8,["modelValue","rail"])}}}),Ne=_("span",{class:"text-h5"},"密码修改",-1),Be=_("small",null,"如果是第一次修改密码，原密码请留空。",-1),Ie=_("br",null,null,-1),Te=_("span",{class:"text-h5"},"更新项目",-1),De={style:{"margin-top":"16px"}},Le=_("p",null,"切换到指定版本",-1),$e=D({__name:"VerticalHeader",setup(a){const i=L();b(!1);let u=b(!1),f=b(!1),p=b(""),d=b(""),m=b(""),V=b(""),$=b(!1),g=b("");const Z=c=>{window.open(c,"_blank")};function ee(){p.value!=""&&(p.value=F.md5(p.value)),d.value=F.md5(d.value),N.post("/api/change_password",{password:p.value,new_password:d.value}).then(c=>{if(c.data.status=="error"){m.value=c.data.message,p.value="",d.value="";return}u.value=!u.value,m.value=c.data.message,setTimeout(()=>{pe().logout()},1e3)}).catch(c=>{console.log(c),m.value=c,p.value="",d.value=""})}function te(){V.value="正在检查更新...",N.get("/api/check_update").then(c=>{$.value=c.data.data.has_new_version,V.value=c.data.message}).catch(c=>{console.log(c),V.value=c})}function A(c){V.value="正在切换版本...",N.post("/api/update_project",{version:c}).then(l=>{V.value=l.data.message,l.data.status=="success"&&setTimeout(()=>{window.location.reload()},1e3)}).catch(l=>{console.log(l),V.value=l})}return(c,l)=>(o(),r(me,{elevation:"0",height:"80"},{default:t(()=>[e(h,{class:"hidden-md-and-down text-secondary",color:"lightsecondary",icon:"",rounded:"sm",variant:"flat",onClick:l[0]||(l[0]=E(s=>n(i).SET_MINI_SIDEBAR(!n(i).mini_sidebar),["stop"])),size:"small"},{default:t(()=>[e(n(U),{size:"20","stroke-width":"1.5"})]),_:1}),e(h,{class:"hidden-lg-and-up text-secondary ms-3",color:"lightsecondary",icon:"",rounded:"sm",variant:"flat",onClick:E(n(i).SET_SIDEBAR_DRAWER,["stop"]),size:"small"},{default:t(()=>[e(n(U),{size:"20","stroke-width":"1.5"})]),_:1},8,["onClick"]),e(S),e(M,{modelValue:n(u),"onUpdate:modelValue":l[4]||(l[4]=s=>y(u)?u.value=s:u=s),persistent:"",width:"700"},{activator:t(({props:s})=>[e(h,I({class:"profileBtn text-primary",color:"lightprimary",variant:"flat",rounded:"pill"},s),{default:t(()=>[e(C,{icon:"mdi-account-edit",size:"25"})]),_:2},1040)]),default:t(()=>[e(P,null,{default:t(()=>[e(j,null,{default:t(()=>[Ne]),_:1}),e(O,null,{default:t(()=>[e(T,null,{default:t(()=>[e(re,null,{default:t(()=>[e(ue,{cols:"12"},{default:t(()=>[e(z,{label:"原密码*",type:"password",modelValue:n(p),"onUpdate:modelValue":l[1]||(l[1]=s=>y(p)?p.value=s:p=s),required:""},null,8,["modelValue"]),e(z,{label:"新密码*",type:"password",modelValue:n(d),"onUpdate:modelValue":l[2]||(l[2]=s=>y(d)?d.value=s:d=s),required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),Be,Ie,_("small",null,k(n(m)),1)]),_:1}),e(q,null,{default:t(()=>[e(S),e(h,{color:"blue-darken-1",variant:"text",onClick:l[3]||(l[3]=s=>y(u)?u.value=!1:u=!1)},{default:t(()=>[v(" 关闭 ")]),_:1}),e(h,{color:"blue-darken-1",variant:"text",onClick:ee},{default:t(()=>[v(" 提交 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:n(f),"onUpdate:modelValue":l[9]||(l[9]=s=>y(f)?f.value=s:f=s),width:"700"},{activator:t(({props:s})=>[e(h,I({onClick:te,class:"profileBtn text-primary",color:"lightprimary",variant:"flat",rounded:"pill"},s),{default:t(()=>[e(C,{icon:"mdi-update",size:"25"})]),_:2},1040)]),default:t(()=>[e(P,null,{default:t(()=>[e(j,null,{default:t(()=>[Te]),_:1}),e(O,null,{default:t(()=>[e(T,null,{default:t(()=>[_("p",null,k(n(V)),1),de(e(h,{onClick:l[5]||(l[5]=s=>A("latest")),color:"primary",class:"ml-2",style:{"border-radius":"10px"}},{default:t(()=>[v(" 更新到最新版本 ")]),_:1},512),[[ce,n($)]]),e(X),_("div",De,[Le,e(z,{label:"版本号。如v3.1.3",modelValue:n(g),"onUpdate:modelValue":l[6]||(l[6]=s=>y(g)?g.value=s:g=s),required:""},null,8,["modelValue"]),e(h,{color:"primary",class:"ml-2",style:{"border-radius":"10px"},onClick:l[7]||(l[7]=s=>A(n(g)))},{default:t(()=>[v(" 切换到指定版本 ")]),_:1})])]),_:1})]),_:1}),e(q,null,{default:t(()=>[e(S),e(h,{color:"blue-darken-1",variant:"text",onClick:l[8]||(l[8]=s=>y(f)?f.value=!1:f=!1)},{default:t(()=>[v(" 关闭 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,{class:"profileBtn text-primary",color:"lightprimary",variant:"flat",onClick:l[10]||(l[10]=s=>Z("https://github.com/Soulter/AstrBot")),rounded:"pill"},{default:t(()=>[e(C,{icon:"mdi-github",size:"25"})]),_:1})]),_:1}))}}),Ue=D({__name:"FullLayout",setup(a){const i=L();return(u,f)=>(o(),r(Ve,null,{default:t(()=>[e(fe,{theme:"PurpleTheme",class:ve([n(i).fontTheme,n(i).mini_sidebar?"mini-sidebar":"",n(i).inputBg?"inputWithbg":""])},{default:t(()=>[e(ze),e($e),e(_e,null,{default:t(()=>[e(T,{fluid:"",class:"page-wrapper"},{default:t(()=>[_("div",null,[e(n(he))])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1}))}});export{Ue as default};
