import{x as C,o as i,c,w as t,a as e,a6 as w,b as l,K as V,e as d,t as p,G as g,d as u,A as y,L as k,a7 as E,J as v,s as f,f as r,F as x,u as $,V as h,q as B,N as S,O as N,P as T,H as j,R as m,j as D}from"./index-c75f6ac5.js";const F={class:"d-sm-flex align-center justify-space-between"},b=C({__name:"ExtensionCard",props:{title:String,link:String},setup(o){const n=o,s=a=>{window.open(a,"_blank")};return(a,_)=>(i(),c(v,{variant:"outlined",elevation:"0",class:"withbg"},{default:t(()=>[e(w,{style:{padding:"10px 20px"}},{default:t(()=>[l("div",F,[e(V,null,{default:t(()=>[d(p(n.title),1)]),_:1}),e(g),e(u,{icon:"mdi-link",variant:"plain",onClick:_[0]||(_[0]=U=>s(n.link))})])]),_:1}),e(y),e(k,null,{default:t(()=>[E(a.$slots,"default")]),_:3})]),_:3}))}}),G=l("div",{style:{"background-color":"white",width:"100%",padding:"16px","border-radius":"10px"}},[l("h3",null,"🧩 已安装的插件")],-1),P={style:{"min-height":"180px","max-height":"180px",overflow:"hidden"}},q={class:"d-flex align-center gap-3"},A=l("div",{style:{"background-color":"white",width:"100%",padding:"16px","border-radius":"10px"}},[l("h3",null,"🧩 插件市场 [待开发]")],-1),I=l("span",{class:"text-h5"},"从 Git 仓库链接安装插件",-1),L=l("small",null,"github, gitee, gitlab 等公开的仓库都行。",-1),O=l("br",null,null,-1),R={name:"ExtensionPage",components:{ExtensionCard:b},data(){return{extension_data:{data:[]},save_message_snack:!1,save_message:"",save_message_success:"",extension_url:"",status:"",dialog:!1}},mounted(){this.getExtensions()},methods:{getExtensions(){m.get("/api/extensions").then(o=>{this.extension_data.data=o.data.data,console.log(this.extension_data)})},newExtension(o){m.post("/api/extensions/install",{url:o}).then(n=>{this.extension_data.data=n.data.data,console.log(this.extension_data)})},uninstallExtension(o){m.post("/api/extensions/uninstall",{name:o}).then(n=>{this.extension_data.data=n.data.data,console.log(this.extension_data)})}}},H=Object.assign(R,{setup(o){return(n,s)=>(i(),f(x,null,[e(h,null,{default:t(()=>[e(r,{cols:"12",md:"12"},{default:t(()=>[G]),_:1}),(i(!0),f(x,null,$(n.extension_data.data,a=>(i(),c(r,{cols:"12",md:"6",lg:"4"},{default:t(()=>[(i(),c(b,{key:a.name,title:a.name,link:a.repo,style:{"margin-bottom":"16px"}},{default:t(()=>[l("p",P,p(a.desc),1),l("div",q,[e(D,null,{default:t(()=>[d("mdi-account")]),_:1}),l("span",null,p(a.author),1),e(g),e(u,{variant:"plain",onClick:_=>n.uninstallExtension(a.name)},{default:t(()=>[d("卸 载[待开发]")]),_:2},1032,["onClick"])])]),_:2},1032,["title","link"]))]),_:2},1024))),256)),e(r,{cols:"12",md:"12"},{default:t(()=>[A]),_:1})]),_:1}),e(j,{modelValue:n.dialog,"onUpdate:modelValue":s[3]||(s[3]=a=>n.dialog=a),persistent:"",width:"700"},{activator:t(({props:a})=>[e(u,B(a,{icon:"mdi-content-plus",size:"x-large",style:{position:"fixed",right:"52px",bottom:"52px"},color:"darkprimary"}),null,16)]),default:t(()=>[e(v,null,{default:t(()=>[e(V,null,{default:t(()=>[I]),_:1}),e(k,null,{default:t(()=>[e(S,null,{default:t(()=>[e(h,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(N,{label:"Git 库链接",modelValue:n.extension_url,"onUpdate:modelValue":s[0]||(s[0]=a=>n.extension_url=a),required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),L,O,l("small",null,p(n.status),1)]),_:1}),e(T,null,{default:t(()=>[e(g),e(u,{color:"blue-darken-1",variant:"text",onClick:s[1]||(s[1]=a=>n.dialog=!1)},{default:t(()=>[d(" 关闭 ")]),_:1}),e(u,{color:"blue-darken-1",variant:"text",onClick:s[2]||(s[2]=a=>n.newExtension(n.extension_url))},{default:t(()=>[d(" 安装 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{H as default};
