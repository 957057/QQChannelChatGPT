import{d as l}from"./index-d089162b.js";const i=l({id:"common",state:()=>({websocket:null,log_cache:[],log_cache_max_len:1e3}),actions:{createWebSocket(){if(this.websocket)return;let e=window.location.protocol==="https:"?"wss":"ws",t="/api/live-log",c=window.location.port,o=`${e}://${window.location.hostname}:${c}${t}`;console.log("websocket url:",o),this.websocket=new WebSocket(o),this.websocket.onmessage=s=>{this.log_cache.push(s.data),this.log_cache.length>this.log_cache_max_len&&this.log_cache.shift()}},getLogCache(){return this.log_cache}}});export{i as u};
