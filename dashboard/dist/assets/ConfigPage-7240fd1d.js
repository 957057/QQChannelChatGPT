import{o as d,l as _,t as K,g as w,d as n,w as o,F as p,n as M,c as s,O as W,K as N,a2 as G,a3 as I,e as J,m as R,u as k,I as q,k as F,G as X,D as Y,a4 as Z,z,a6 as O,J as S,a as j,a7 as D,a0 as A,a1 as E}from"./index-440fed29.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";const x={props:{metadata:Object,iterable:Object,metadataKey:String}},aa={key:0,style:{"margin-bottom":"8px"}};function ea(f,a,e,B,T,t){var m,u;return d(),_(p,null,[e.iterable&&((m=e.metadata[e.metadataKey])==null?void 0:m.type)==="object"?(d(),_("h3",aa,K((u=e.metadata[e.metadataKey])==null?void 0:u.description),1)):w("",!0),n(q,null,{default:o(()=>[(d(!0),_(p,null,M(e.iterable,(g,l)=>(d(),s(W,{key:l,style:{"margin-bottom":"0.5px"}},{default:o(()=>{var v,y,h,C,i,U,L,P,b;return[((v=e.metadata[e.metadataKey].items[l])==null?void 0:v.type)==="string"&&l!=="name"?(d(),s(N,{key:0,modelValue:e.iterable[l],"onUpdate:modelValue":r=>e.iterable[l]=r,label:((y=e.metadata[e.metadataKey].items[l])==null?void 0:y.description)+"("+l+")",variant:"outlined",dense:""},null,8,["modelValue","onUpdate:modelValue","label"])):w("",!0),(((h=e.metadata[e.metadataKey].items[l])==null?void 0:h.type)==="int"||((C=e.metadata[e.metadataKey].items[l])==null?void 0:C.type)==="float")&&l!=="name"?(d(),s(N,{key:1,modelValue:e.iterable[l],"onUpdate:modelValue":r=>e.iterable[l]=r,label:((i=e.metadata[e.metadataKey].items[l])==null?void 0:i.description)+"("+l+")",variant:"outlined",dense:""},null,8,["modelValue","onUpdate:modelValue","label"])):((U=e.metadata[e.metadataKey].items[l])==null?void 0:U.type)==="bool"?(d(),s(G,{key:2,modelValue:e.iterable[l],"onUpdate:modelValue":r=>e.iterable[l]=r,label:((L=e.metadata[e.metadataKey].items[l])==null?void 0:L.description)+"("+l+")",color:"primary",inset:""},null,8,["modelValue","onUpdate:modelValue","label"])):((P=e.metadata[e.metadataKey].items[l])==null?void 0:P.type)==="list"?(d(),s(I,{key:3,variant:"outlined",modelValue:e.iterable[l],"onUpdate:modelValue":r=>e.iterable[l]=r,chips:"",clearable:"",label:((b=e.metadata[e.metadataKey].items[l])==null?void 0:b.description)+"("+l+")",multiple:"","prepend-icon":"mdi-tag-multiple-outline"},{selection:o(({attrs:r,item:V,select:H,selected:Q})=>[n(J,R(r,{"model-value":Q,closable:"",onClick:H,"onClick:close":ma=>f.remove(V)}),{default:o(()=>[k("strong",null,K(V),1)]),_:2},1040,["model-value","onClick","onClick:close"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])):w("",!0)]}),_:2},1024))),128))]),_:1})],64)}const c=$(x,[["render",ea]]);const ta=k("h2",null,"消息平台",-1),la=k("h2",{style:{"margin-bottom":"16px","margin-top":"16px"}},"通用配置",-1),oa=k("h2",null,"LLM",-1),da=k("h2",{style:{"margin-bottom":"16px"}},"通用配置",-1),na={name:"ConfigPage",components:{AstrBotConfig:c},data(){return{config_data:{config:{platform:[],llm:[],platform_settings:{},content_safety:{},llm_settings:{}}},metadata:{},save_message_snack:!1,save_message:"",save_message_success:"",namespace:"",tab:0,tabPlatform:0,tabLLM:0,tabs_key:["消息平台","大语言模型","其他配置"],common_configs_key:[]}},mounted(){this.getConfig()},methods:{getConfig(){z.get("/api/config/get").then(f=>{this.config_data=f.data.data.config,this.metadata=f.data.data.metadata;for(let a in this.config_data)a!="platform"&&a!="llm"&&a!="platform_settings"&&a!="llm_settings"&&a!="content_safety"&&this.common_configs_key.push(a)}).catch(f=>{save_message=f,save_message_snack=!0,save_message_success="error"})},updateConfig(){z.post("/api/config/astrbot/update",this.config_data).then(f=>{f.data.status==="success"?(this.save_message=f.data.message,this.save_message_snack=!0,this.save_message_success="success"):(this.save_message=f.data.message,this.save_message_snack=!0,this.save_message_success="error")}).catch(f=>{this.save_message=f,this.save_message_snack=!0,this.save_message_success="error"})}}},ua=Object.assign(na,{setup(f){return(a,e)=>{const B=F("v-tabs-window-item"),T=F("v-tabs-window");return d(),_(p,null,[n(X,null,{default:o(()=>[n(O,{modelValue:a.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>a.tab=t),"align-tabs":"center",color:"deep-purple-accent-4"},{default:o(()=>[(d(!0),_(p,null,M(a.tabs_key,(t,m)=>(d(),s(D,{key:m,value:m},{default:o(()=>[j(K(t),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),n(T,{modelValue:a.tab,"onUpdate:modelValue":e[5]||(e[5]=t=>a.tab=t)},{default:o(()=>[a.tab===0?(d(),s(B,{key:0},{default:o(()=>[n(S,{fluid:""},{default:o(()=>{var t,m,u,g,l,v,y,h,C,i,U,L,P;return[ta,n(O,{style:{"margin-top":"16px"},modelValue:a.tabPlatform,"onUpdate:modelValue":e[1]||(e[1]=b=>a.tabPlatform=b),"align-tabs":"left",color:"deep-purple-accent-4"},{default:o(()=>{var b;return[(d(!0),_(p,null,M((b=a.config_data)==null?void 0:b.platform,(r,V)=>(d(),s(D,{key:V,value:V},{default:o(()=>[j(K(r.id)+"("+K(r.name)+") ",1)]),_:2},1032,["value"]))),128))]}),_:1},8,["modelValue"]),n(T,{modelValue:a.tabPlatform,"onUpdate:modelValue":e[2]||(e[2]=b=>a.tabPlatform=b)},{default:o(()=>{var b;return[(d(!0),_(p,null,M((b=a.config_data)==null?void 0:b.platform,(r,V)=>A((d(),s(B,{key:V,value:V},{default:o(()=>[n(S,null,{default:o(()=>[n(c,{metadata:a.metadata,iterable:r,metadataKey:"platform"},null,8,["metadata","iterable"])]),_:2},1024)]),_:2},1032,["value"])),[[E,a.tabPlatform===V]])),128))]}),_:1},8,["modelValue"]),la,n(c,{metadata:a.metadata,iterable:(t=a.config_data)==null?void 0:t.platform_settings,metadataKey:"platform_settings"},null,8,["metadata","iterable"]),n(c,{metadata:(u=(m=a.metadata)==null?void 0:m.platform_settings)==null?void 0:u.items,iterable:(l=(g=a.config_data)==null?void 0:g.platform_settings)==null?void 0:l.rate_limit,metadataKey:"rate_limit"},null,8,["metadata","iterable"]),n(c,{metadata:(y=(v=a.metadata)==null?void 0:v.content_safety)==null?void 0:y.items,iterable:(C=(h=a.config_data)==null?void 0:h.content_safety)==null?void 0:C.baidu_aip,metadataKey:"baidu_aip"},null,8,["metadata","iterable"]),n(c,{metadata:(U=(i=a.metadata)==null?void 0:i.content_safety)==null?void 0:U.items,iterable:(P=(L=a.config_data)==null?void 0:L.content_safety)==null?void 0:P.internal_keywords,metadataKey:"internal_keywords"},null,8,["metadata","iterable"])]}),_:1})]),_:1})):w("",!0),a.tab===1?(d(),s(B,{key:1},{default:o(()=>[n(S,{fluid:""},{default:o(()=>{var t;return[oa,n(O,{modelValue:a.tabLLM,"onUpdate:modelValue":e[3]||(e[3]=m=>a.tabLLM=m),"align-tabs":"left",color:"deep-purple-accent-4"},{default:o(()=>{var m;return[(d(!0),_(p,null,M((m=a.config_data)==null?void 0:m.llm,(u,g)=>(d(),s(D,{key:g,value:g},{default:o(()=>[j(K(u.name),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["modelValue"]),n(T,{modelValue:a.tabLLM,"onUpdate:modelValue":e[4]||(e[4]=m=>a.tabLLM=m)},{default:o(()=>{var m;return[(d(!0),_(p,null,M((m=a.config_data)==null?void 0:m.llm,(u,g)=>A((d(),s(B,{key:g,value:g},{default:o(()=>[n(S,null,{default:o(()=>[n(c,{metadata:a.metadata,iterable:u,metadataKey:"llm"},null,8,["metadata","iterable"]),n(c,{metadata:a.metadata.llm.items,iterable:u.model_config,metadataKey:"model_config"},null,8,["metadata","iterable"]),n(c,{metadata:a.metadata.llm.items,iterable:u.image_generation_model_config,metadataKey:"image_generation_model_config"},null,8,["metadata","iterable"])]),_:2},1024)]),_:2},1032,["value"])),[[E,a.tabLLM===g]])),128))]}),_:1},8,["modelValue"]),da,n(c,{metadata:a.metadata,iterable:(t=a.config_data)==null?void 0:t.llm_settings,metadataKey:"llm_settings"},null,8,["metadata","iterable"])]}),_:1})]),_:1})):w("",!0),a.tab===2?(d(),s(B,{key:2},{default:o(()=>[n(S,{fluid:""},{default:o(()=>[n(q,{style:{"margin-top":"16px"}},{default:o(()=>[(d(!0),_(p,null,M(a.common_configs_key,t=>{var m,u,g,l,v,y,h,C;return d(),_("div",{key:t},[((m=a.metadata[t])==null?void 0:m.type)==="string"&&t!=="name"?(d(),s(N,{key:0,modelValue:a.config_data[t],"onUpdate:modelValue":i=>a.config_data[t]=i,label:((u=a.metadata[t])==null?void 0:u.description)+"("+t+")",variant:"outlined",dense:""},null,8,["modelValue","onUpdate:modelValue","label"])):w("",!0),((g=a.metadata[t])==null?void 0:g.type)==="int"&&t!=="name"?(d(),s(N,{key:1,modelValue:a.config_data[t],"onUpdate:modelValue":i=>a.config_data[t]=i,label:((l=a.metadata[t])==null?void 0:l.description)+"("+t+")",variant:"outlined",dense:""},null,8,["modelValue","onUpdate:modelValue","label"])):((v=a.metadata[t])==null?void 0:v.type)==="bool"?(d(),s(G,{key:2,modelValue:a.config_data[t],"onUpdate:modelValue":i=>a.config_data[t]=i,label:((y=a.metadata[t])==null?void 0:y.description)+"("+t+")",color:"primary",inset:""},null,8,["modelValue","onUpdate:modelValue","label"])):((h=a.metadata[t])==null?void 0:h.type)==="list"?(d(),s(I,{key:3,variant:"outlined",modelValue:a.config_data[t],"onUpdate:modelValue":i=>a.config_data[t]=i,chips:"",clearable:"",label:((C=a.metadata[t])==null?void 0:C.description)+"("+t+")",multiple:"","prepend-icon":"mdi-tag-multiple-outline"},{selection:o(({attrs:i,item:U,select:L,selected:P})=>[n(J,R(i,{"model-value":P,closable:"",onClick:L,"onClick:close":b=>a.remove(U)}),{default:o(()=>[k("strong",null,K(U),1)]),_:2},1040,["model-value","onClick","onClick:close"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])):w("",!0)])}),128))]),_:1})]),_:1})]),_:1})):w("",!0)]),_:1},8,["modelValue"])]),_:1}),n(Y,{icon:"mdi-content-save",size:"x-large",style:{position:"fixed",right:"52px",bottom:"52px"},color:"darkprimary",onClick:a.updateConfig},null,8,["onClick"]),n(Z,{timeout:2e3,elevation:"24",color:a.save_message_success,modelValue:a.save_message_snack,"onUpdate:modelValue":e[6]||(e[6]=t=>a.save_message_snack=t)},{default:o(()=>[j(K(a.save_message),1)]),_:1},8,["color","modelValue"])],64)}}});export{ua as default};
